# 1. 주식 데이터

## 폐장시점에 주가 정보를 최대 1,000개의 클라이언트에게 제공한다. 데이터는 이미 주어져 있고, 어떤 형태로든 저장할 수 있다고 가정해도 좋다. 여러분은 개발과 배포를 책임져야 하고, 지속적으로 시스템을 모니터링하는 한편 사용자에게 전송되는 정보를 관리해야 한다. 여러분이 생각하는 방법을 설명하고 어떤 접근법과 기술을 사용했는지 말하라. 클라이언트프로그램에 정보를 전송하는 방법도 원하는 대로 선택할 수 있다. 

### 나의 풀이
일단 문제 자체를 정확히 이해하기가 어려웠다. 누군가에게 문제의 의도를 질문할 상황이 아니니 혼자서 추측할 수밖에 없다. 클라이언트에게 제공한다는 것을 나는 단순히 실존하는 특정 개개인 사용자에게 정보를 전송한다는 의미로 생각했다. 

- 매일 같은 작업을 처리할 서버가 필요하고, 데이터를 저장할 서버도 추가로 필요하다.
- 데이터는 DB에 저장한다. 텍스트로 파일에 저장하는 방법도 생각해보았지만 데이터를 안정적으로 보관하고 필요한 경우 다른 형태로 가공하기 위해서는 DB가 장기적으로 더 나은 선택이라고 판단했다. 
- 클라이언트에게 정보를 전송할 때에는 이미 등록된 클라이언트에게 자동으로 발송이 되는 거라고 생각했기 때문에 이메일이나 메신저를 통해 발송하고 전송 결과를 다시 응답받아 저장하는 방식으로 설계했다. 만약 사용자가 직접 데이터를 요청할 수 있게 하려면 별도의 클라이언트 프로그램이 있어야 한다.
- 매일 폐장 시간이 되면 프로세스가 실행된다. DB에 저장된 주식정보와 클라이언트 정보를 불러와 json type으로 직렬화한 후 각 클라이언트에게 http API로 데이터를 일괄 전송한다. 


## 책의 해답

### 집중해야 할 측면

- 클라이언트측의 사용 편의성 -> *이 지점에서 클라이언트가 단순히 정보를 수신받기만 하는 입장이 아님을 알았다. 클라이언트는 제공받은 데이터를 가공해서 또다른 데이터나 서비스를 만들어내는 대상일 수도 있다. 따라서 클라이언트에게 정보를 제공하는 방식도 더 다양하게 생각해볼 수 있다.*
- 서버측 편의성: 구현 및 유지보수 측면에서 불필요한 작업이 없어야 한다.
- 나중에 생길 수 있는 요구를 수용하기에 유연한 구조: 실제 상황의 관점에서 생각하기
- 규모 확장성과 효율성

### 방안 1
데이터를 간단한 텍스트 파일에 보관하고 클라이언트가 FTP 서버에서 다운로드받는 방법. 내용확인과 백업이 편하지만 쿼리를 날리려면 텍스트 파일을 파싱해야 하는 등 과정이 복잡하다. 

### 방안 2
표준적인 SQL 데이터베이스를 이용해서 클라이언트가 직접 데이터베이스를 사용하도록 만드는 방법. -> *생각해보니 지금 직장에서 이런 방식으로 매일 업데이트되는 특정 도메인의 데이터를 제공받고 있다.*

- 장점
    - 클라이언트에게 부가기능을 제공할 경우 복잡한 조건의 쿼리를 간단하고 효율적으로 처리할 수 있다.
    - 쿼리 취소, 데이터 백업, 보안 유지 등의 기능이 표준 데이터베이스 기능에 포함되어 있어 구현이 쉽다.
    - SQL을 통한 기능 통합은 소프트웨어 개발 환경이 표준적으로 제공하는 기능 중 하나이므로 클라이언트가 서비스를 기존 애플리케이션에 통합하기 쉽다.
- 단점
    - 개발 결과물이 필요 이상으로 무거워진다.
    - 사람이 이해하기 쉽도록 데이터를 조회하고 관리하기 위한 추가 구현이 필요하다.  
    - 클라이언트에게 지정된 권한 이상을 주지 않도록 주의해야 하며, 클라이언트가 비효율적이고 비용이 높은 쿼리를 날릴 경우 그 비용도 서버가 감당해야 한다.

### 방안 3
XML 포맷을 이용한다. 
- 장점
    - 데이터 전송 표준모델이므로 전송하기 쉽다. 사람이 보기에도, 기계가 처리하기도 쉽다.
    - 대부분의 프로그래밍 언어에는 XML을 처리하기 위한 라이브러리가 포함되어 있으므로 클라이언트가 관련 기능을 구현하기도 쉽다.
    - 노드를 추가해 새로운 데이터를 삽입해도 기존 파서가 깨지지 않는다.
    - 기존 백업 도구를 이용할 수 있으므로 별도의 백업 도구를 구현할 필요가 없다.
- 단점
    - 자료 중 일부만 필요하더라도 모든 자료를 전송해야 한다.
    - 쿼리를 수행하려면 전체 파일을 파싱해야 한다.

정답을 찾기보다는 시스템을 설계하는 과정에서 다양한 방안을 제시하고 장단점을 평가할 수 있어야 한다.        